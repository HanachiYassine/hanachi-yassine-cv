<div class="cv-container" id="cv-container" *ngIf="infos">
  <aside class="cv-left">
    <div class="cv-photo-container">
      <img class="cv-photo" src="assets/cv-profile.jpeg" alt="Photo de Yassine Hannachi" />
      <button (click)="downloadCV()" class="cv-download-btn">
        üì• T√©l√©charger le CV
      </button>
    </div>

    <section class="cv-section-left">
      <h3 class="cv-section-title-left">CONTACT</h3>
      <ul class="cv-list-left">
        <li>
          <span class="icon">üìç</span> {{ infos.adresse }}
        </li>
        <li>
          <span class="icon">üìû</span> <a [href]="'tel:' + infos.tel">{{ infos.tel }}</a>
        </li>
        <li>
          <span class="icon">‚úâÔ∏è</span> <a [href]="'mailto:' + infos.email">{{ infos.email }}</a>
        </li>
        <li>
          <span class="icon">üîó</span> <a [href]="infos.linkedin" target="_blank">LinkedIn</a>
        </li>
        <li>
          <span class="icon">üéÇ</span> {{ infos.age }}
        </li>
        <li>
          <span class="icon">üåç</span> {{ infos.nationalite }}
        </li>
        <li>
          <span class="icon">üíç</span> {{ infos.statut }}
        </li>
        <li>
          <span class="icon">‚è≥</span> Pr√©avis : {{ infos.preavis }}
        </li>
      </ul>
    </section>

    <section class="cv-section-left">
      <h3 class="cv-section-title-left">FORMATION</h3>
      <div *ngFor="let f of formation; trackBy: trackByIndex" class="cv-item-left">
        <p class="cv-date">{{ f.periode }}</p>
        <p class="cv-degree">{{ f.diplome }}</p>
        <p class="cv-school">{{ f.etab }}</p>
      </div>
    </section>

    <section class="cv-section-left">
      <h3 class="cv-section-title-left">LANGUES</h3>
      <ul class="cv-list-left">
        <li *ngFor="let l of langues; trackBy: trackByIndex">
          <strong>{{ l.langue }}</strong> : {{ l.niveau }}
        </li>
      </ul>
    </section>

    <section class="cv-section-left">
      <h3 class="cv-section-title-left">CERTIFICATS & FORMATIONS</h3>
      <ul class="cv-list-left">
        <li *ngFor="let c of certificats; trackBy: trackByIndex">{{ c }}</li>
      </ul>
    </section>

    <section class="cv-section-left">
      <h3 class="cv-section-title-left">CENTRES D‚ÄôINT√âR√äT</h3>
      <ul class="cv-list-left">
        <li *ngFor="let c of centresInteret; trackBy: trackByIndex">{{ c }}</li>
      </ul>
    </section>
  </aside>

  <main class="cv-right">
    <header class="cv-header">
      <h1 class="cv-name">{{ infos.nom }}</h1>
      <h2 class="cv-title">{{ infos.titre }}</h2>
    </header>

    <section class="cv-section">
      <h3 class="cv-section-title">PROFIL</h3>
      <p class="cv-text">{{ profil }}</p>
    </section>

    <section class="cv-section">
      <h3 class="cv-section-title">COMP√âTENCES</h3>
      <div class="cv-skills-grid">
        <div class="cv-skill-group">
          <h4>Langages & Frameworks</h4>
          <p>{{ competences.langagesFrameworks.join(', ') }}</p>
        </div>
        <div class="cv-skill-group">
          <h4>Bases de donn√©es</h4>
          <p>{{ competences.bdd.join(', ') }}</p>
        </div>
        <div class="cv-skill-group">
          <h4>Outils & CI/CD</h4>
          <p>{{ competences.outils.join(', ') }}</p>
        </div>
        <div class="cv-skill-group">
          <h4>Serveurs</h4>
          <p>{{ competences.serveurs.join(', ') }}</p>
        </div>
        <div class="cv-skill-group">
          <h4>M√©thodologies</h4>
          <p>{{ competences.methodos.join(', ') }}</p>
        </div>
        <div class="cv-skill-group">
          <h4>IDE & Syst√®mes</h4>
          <p>{{ competences.ide.join(', ') }}, {{ competences.systemes.join(', ') }}</p>
        </div>
      </div>
    </section>

    <section class="cv-section">
      <h3 class="cv-section-title">EXP√âRIENCES PROFESSIONNELLES</h3>
      <article *ngFor="let exp of experiences; trackBy: trackByIndex" class="cv-experience-item">
        <div class="cv-experience-header">
          <h4 class="cv-experience-role">{{ exp.poste }}</h4>
          <span class="cv-experience-company">{{ exp.entreprise }} | {{ exp.localisation }}</span>
          <span class="cv-experience-date">{{ exp.periode }}</span>
        </div>

        <div class="cv-experience-details">
          <p *ngIf="exp.projet"><strong>Projet:</strong> {{ exp.projet }}</p>
          <p *ngIf="exp.client"><strong>Client:</strong> {{ exp.client }}</p>
          <p *ngIf="exp.equipe"><strong>√âquipe:</strong> {{ exp.equipe }}</p>

          <ul *ngIf="exp.missions?.length" class="cv-missions">
            <li *ngFor="let m of exp.missions; trackBy: trackByIndex">{{ m }}</li>
          </ul>

          <p *ngIf="exp.technologies?.length" class="cv-techs">
            <strong>Environnement technique:</strong> {{ (exp.technologies ?? []).join(', ') }}
          </p>

          <!-- Sub-projects -->
          <div *ngIf="exp.projets?.length" class="cv-sub-projects">
            <div *ngFor="let p of exp.projets; trackBy: trackByIndex" class="cv-sub-project">
              <h5 class="cv-sub-project-title">{{ p.titre }}</h5>
              <p *ngIf="p.contexte">{{ p.contexte }}</p>

              <ul *ngIf="p.missions?.length" class="cv-missions">
                <li *ngFor="let pm of p.missions; trackBy: trackByIndex">{{ pm }}</li>
              </ul>

              <p class="cv-techs" *ngIf="p.technologies?.length">
                <strong>Environnement technique:</strong> {{ p.technologies.join(', ') }}
              </p>
            </div>
          </div>
        </div>
      </article>
    </section>
  </main>
</div>